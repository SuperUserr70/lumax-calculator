<!DOCTYPE html>
<html lang="te">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Lumax Enterprises</title>

<link rel="icon" href="icon.png">
<meta name="theme-color" content="#0f766e">

<style>
:root{
  --bg:#f1f5f9;
  --card:#ffffff;
  --primary:#0f766e;
  --secondary:#1e293b;
  --danger:#b91c1c;
}

body{
  margin:0;
  font-family: system-ui, Arial;
  background:var(--bg);
}

header{
  background:linear-gradient(135deg,#0f766e,#0891b2);
  color:white;
  padding:16px;
  text-align:center;
  font-size:22px;
  font-weight:700;
  user-select:none;
}

.hidden{ display:none; }

.grid{
  display:grid;
  grid-template-columns:repeat(2,1fr);
  gap:14px;
  padding:14px;
}

.item{
  background:var(--card);
  border-radius:16px;
  padding:20px 10px;
  text-align:center;
  box-shadow:0 6px 14px rgba(0,0,0,.08);
  cursor:pointer;
}

.item-name{ font-size:30px; font-weight:800; }
.price{ font-size:20px; color:#555; }
.qty{ font-size:24px; font-weight:800; color:var(--danger); }

footer{
  position:sticky;
  bottom:0;
  background:#020617;
  color:white;
  padding:14px;
  text-align:center;
}

.btn{
  margin:6px;
  background:var(--danger);
  border:none;
  border-radius:10px;
  padding:10px 18px;
  font-size:16px;
  color:white;
}

.admin-box{ padding:16px; }

.section{
  background:white;
  border-radius:12px;
  padding:12px;
  margin-bottom:14px;
}

pre{
  white-space:pre-line;
  font-size:15px;
}
</style>
</head>

<body>

<header id="appHeader">Lumax Enterprises</header>

<!-- ================= CALCULATOR ================= -->
<div id="calculator">

  <div class="grid">

    <div class="item" onclick="add('oneL',120)">
      <div class="item-name">1 ‡∞≤‡±Ä‡∞ü‡∞∞‡±ç</div>
      <div class="price">‚Çπ120</div>
      <div class="qty" id="oneL">0</div>
    </div>

    <div class="item" onclick="add('halfL',160)">
      <div class="item-name">‡∞π‡∞æ‡∞´‡±ç ‡∞≤‡±Ä‡∞ü‡∞∞‡±ç</div>
      <div class="price">‚Çπ160</div>
      <div class="qty" id="halfL">0</div>
    </div>

    <div class="item" onclick="add('twoL',180)">
      <div class="item-name">2 ‡∞≤‡±Ä‡∞ü‡∞∞‡±ç</div>
      <div class="price">‚Çπ180</div>
      <div class="qty" id="twoL">0</div>
    </div>

    <div class="item" onclick="add('badam',530)">
      <div class="item-name">‡∞¨‡∞æ‡∞¶‡∞Ç</div>
      <div class="price">‚Çπ530</div>
      <div class="qty" id="badam">0</div>
    </div>

    <div class="item" onclick="add('campa',230)">
      <div class="item-name">‡∞ï‡±ç‡∞Ø‡∞æ‡∞Ç‡∞™‡∞æ</div>
      <div class="price">‚Çπ230</div>
      <div class="qty" id="campa">0</div>
    </div>

  </div>

  <footer>
  <div class="total">
    ‡∞Æ‡±ä‡∞§‡±ç‡∞§‡∞Ç ‚Çπ<span id="total">0</span>
    <button class="btn" onclick="resetAll()">‡∞∞‡∞ø‡∞∏‡±Ü‡∞ü‡±ç</button>
    <button class="btn" id="summaryBtn" style="display:none" onclick="showSummary()">‡∞∏‡∞æ‡∞∞‡∞æ‡∞Ç‡∞∂‡∞Ç</button>
  </div>
  <div class="credit">Designed by LumaTech</div>
</footer>

</div>

<!-- ================= ADMIN ================= -->
<div id="adminPanel" class="hidden admin-box">

  <div class="section">
    <h3>üìÖ Daily Totals</h3>
    <pre id="dailyTotals"></pre>
  </div>

  <div class="section">
    <h3>üßæ Receipt Preview</h3>
    <pre id="receiptBox"></pre>
  </div>

  <button class="btn" onclick="sendSummary()">üì§ Send</button>
  <button class="btn" onclick="downloadCSV()">‚¨á CSV</button>
  <button class="btn" onclick="window.print()">üñ® Print</button>
  <button class="btn secondary" onclick="clearSales()">üóë Clear today Sales</button>
  <button class="btn" onclick="exitAdmin()">üîô Exit</button>

</div>

<script>
/* ===== CONFIG ===== */
const ADMIN_PIN = "8003";

/* ===== DATA ===== */
let total=0, qty={};

const ITEMS={
  oneL:"1 ‡∞≤‡±Ä‡∞ü‡∞∞‡±ç",
  halfL:"‡∞π‡∞æ‡∞´‡±ç ‡∞≤‡±Ä‡∞ü‡∞∞‡±ç",
  twoL:"2 ‡∞≤‡±Ä‡∞ü‡∞∞‡±ç",
  badam:"‡∞¨‡∞æ‡∞¶‡∞Ç",
  campa:"‡∞ï‡±ç‡∞Ø‡∞æ‡∞Ç‡∞™‡∞æ"
};

/* ===== SELL ===== */
function add(id,price){
  qty[id]=(qty[id]||0)+1;
  document.getElementById(id).innerText=qty[id];
  total+=price;
  document.getElementById("total").innerText=total;
}

function resetAll(){
  if(total>0) saveSale();
  total=0; qty={};
  document.getElementById("total").innerText=0;
  document.querySelectorAll(".qty").forEach(q=>q.innerText=0);
}

/* ===== STORAGE ===== */
function saveSale(){
  const sales=JSON.parse(localStorage.getItem("sales")||"[]");
  let items={};
  for(let id in qty) items[ITEMS[id]]=qty[id];
  sales.push({date:new Date().toISOString(),items,total});
  localStorage.setItem("sales",JSON.stringify(sales));
}

/* ===== ADMIN ACCESS ===== */
let pressTimer;
const header=document.getElementById("appHeader");
header.addEventListener("touchstart",()=>pressTimer=setTimeout(askPin,3000));
header.addEventListener("touchend",()=>clearTimeout(pressTimer));
header.addEventListener("dblclick",askPin);

function askPin(){
  const pin=prompt("Admin PIN");
  if(pin===ADMIN_PIN) enterAdmin();
  else alert("Wrong PIN");
}

function enterAdmin(){
  document.getElementById("calculator").classList.add("hidden");
  document.getElementById("adminPanel").classList.remove("hidden");
  buildAdminData();
}

function exitAdmin(){
  document.getElementById("adminPanel").classList.add("hidden");
  document.getElementById("calculator").classList.remove("hidden");
}

/* ===== ADMIN DATA ===== */
function buildAdminData(){
  const sales=JSON.parse(localStorage.getItem("sales")||"[]");
  buildDailyTotals(sales);
  buildReceipt(sales);
}

function buildDailyTotals(sales){
  let map={};
  sales.forEach(s=>{
    const d=s.date.split("T")[0];
    map[d]=(map[d]||0)+s.total;
  });
  let txt="";
  for(let d in map) txt+=`${d} ‚Üí ‚Çπ${map[d]}\n`;
  document.getElementById("dailyTotals").innerText=txt||"No data";
}

function buildReceipt(sales){
  let txt="Lumax Enterprises\n------------------\n";
  sales.forEach((s,i)=>{
    txt+=`#${i+1} ${new Date(s.date).toLocaleString()}\n`;
    for(let k in s.items) txt+=` ${k} x ${s.items[k]}\n`;
    txt+=` Total: ‚Çπ${s.total}\n\n`;
  });
  document.getElementById("receiptBox").innerText=txt||"No data";
}

/* ===== EXPORTS ===== */
function sendSummary(){
  const text=document.getElementById("receiptBox").innerText;
  window.open(`https://wa.me/?text=${encodeURIComponent(text)}`);
}

function downloadCSV(){
  const sales=JSON.parse(localStorage.getItem("sales")||"[]");
  let csv="Date,Item,Qty,Total\n";
  sales.forEach(s=>{
    for(let k in s.items){
      csv+=`${s.date},${k},${s.items[k]},${s.total}\n`;
    }
  });
  const blob=new Blob([csv],{type:"text/csv"});
  const a=document.createElement("a");
  a.href=URL.createObjectURL(blob);
  a.download="sales.csv";
  a.click();
}
function clearSales(){
  // Step 1: Confirmation (English)
  const ok = confirm("‚ö†Ô∏è Are you sure you want to permanently delete ALL sales data?");
  if(!ok) return;

  // Step 2: PIN re-check (English)
  const pin = prompt("Re-enter Admin PIN to confirm");
  if(pin !== ADMIN_PIN){
    alert("‚ùå Wrong PIN. Sales data was NOT deleted.");
    return;
  }

  // Step 3: Clear storage
  localStorage.removeItem("sales");

  // Step 4: Clear admin UI
  const daily = document.getElementById("dailyTotals");
  const receipt = document.getElementById("receiptBox");
  if(daily) daily.innerText = "No data available";
  if(receipt) receipt.innerText = "No data available";

  alert("‚úÖ All sales data has been cleared successfully.");
}


</script>

</body>
</html>
